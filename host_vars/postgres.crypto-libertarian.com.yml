---
ansible_become_pass_for:
  kotovalexarian: !vault |
    $ANSIBLE_VAULT;1.2;AES256;kotovalexarian
    37396336386663613462333835626639303230393939643938626662613462616633306466396538
    3761393832313565323237393866646638666339653064390a633730643030353662373736633137
    65393732383264663630316537663034633733396632636237323965333333333839373139353062
    6263643832393563340a303865643536643239653164346362626265333137333363616130303834
    62393062663131306163346336373366356431386364613133613764303933656263623962653663
    6435306164366636306433653931616233393734393066313261

ansible_become_pass: "{{ ansible_become_pass_for[admin] }}"

common__certbot__cert_name: 'postgres.crypto-libertarian.com'
common__certbot__cert_domains:
  - 'postgres.crypto-libertarian.com'
common__certbot__post_hook: null
common__certbot__pre_hook: null

postgresql_backups_dir: '/var/lib/postgresql/backups/12/main'

postgresql_users:
  - name: matrix_synapse
    password: !vault |
      $ANSIBLE_VAULT;1.1;AES256
      35643162356165376337313538396466333534613666323865636363656264373539646135303136
      3263643435383866643161333931383430313133633331370a636639303366616132616164306537
      31333162356131633635303931353931633763386238636461343437363861343565616430666137
      3738616138303739350a646331323639306464656332383233333664653561313934666366623939
      65373839653630353830326336376534313136313735343532373232653536653363366132333363
      6639346134356664313434373664653734366361633935633230

postgresql_databases:
  - name: matrix_synapse
    owner: matrix_synapse
    lc_collate: C
    lc_ctype: C

postgresql_global_config_options:
  - option: listen_addresses
    value: '*'

postgresql_hba_entries:
  - type: local
    database: all
    user: all
    auth_method: peer

  - type: host
    database: all
    user: all
    address: '127.0.0.1/32'
    auth_method: md5

  - type: host
    database: all
    user: all
    address: '::1/128'
    auth_method: md5

  - type: hostssl
    database: matrix_synapse
    user: matrix_synapse
    address: '134.209.196.172/32'
    auth_method: md5

  - type: hostssl
    database: matrix_synapse
    user: matrix_synapse
    address: '2a03:b0c0:2:f0::142:3001/128'
    auth_method: md5

  - type: hostssl
    database: matrix_synapse
    user: matrix_synapse
    address: '10.133.8.214/32'
    auth_method: md5

  - type: host
    database: all
    user: all
    address: '0.0.0.0/0'
    auth_method: reject

  - type: host
    database: all
    user: all
    address: '::/0'
    auth_method: reject
