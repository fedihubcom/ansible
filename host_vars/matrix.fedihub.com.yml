---
ansible_become_pass_for:
  kotovalexarian: !vault |
    $ANSIBLE_VAULT;1.2;AES256;kotovalexarian
    61643339313266356538643266316138633738616632633531383730383433633030656633383431
    3335393862333133643030613131636232663434636164650a376464396333323662363037376164
    38356164613536633139643333383362363531343933363661356532663838656336363166616638
    3032303434366266330a376439396233363065323135613963633265373435636530646433343036
    65663336353266323636633339313236353565353431363965303762643766356562313566383031
    3536363333616139613738336566633937313539623536316666
  xuhcc: !vault |
    $ANSIBLE_VAULT;1.2;AES256;xuhcc
    33613837643333393933646163323464336164353963353039323338366339343137356134353164
    6135373037323262663461626430376134636433393037360a666435393133653763323834393530
    38643437613437643939386232393762326536363532376266643034623833316137376233363962
    3237346330633334630a613565623237616361623635343466303538613066653166316566616233
    63623962363933656164623338346435346538646364383539383363346666393533

ansible_become_pass: "{{ ansible_become_pass_for[admin] }}"

common__certbot__cert_name: 'matrix.fedihub.com'
common__certbot__cert_domains:
  - 'matrix.fedihub.com'
  - 'element.fedihub.com'
common__certbot__post_hook: 'systemctl is-active nginx.service || systemctl start nginx.service'
common__certbot__pre_hook: 'systemctl is-active nginx.service && systemctl stop nginx.service || true'

common__nginx__state: install
common__nginx__remove_default: true

matrix__site_host: 'fedihub.com'
matrix__base_host: 'matrix.fedihub.com'
matrix__web_host:  'element.fedihub.com'

matrix__site_url: 'https://fedihub.com'
matrix__base_url: 'https://matrix.fedihub.com'
matrix__web_url:  'https://element.fedihub.com'

matrix__admin_contact: 'mailto:kotovalexarian@gmail.com'
matrix__admin_user: '@kotovalexarian:fedihub.com'

matrix__nginx__ssl_cert: '/etc/letsencrypt/live/matrix.fedihub.com/fullchain.pem'
matrix__nginx__ssl_key:  '/etc/letsencrypt/live/matrix.fedihub.com/privkey.pem'

matrix__synapse__pg_enable: true
matrix__synapse__pg_host: 'postgres.fedihub.com'
matrix__synapse__pg_username: 'matrix_synapse'
matrix__synapse__pg_database: 'matrix_synapse'

matrix__synapse__pg_password: !vault |
  $ANSIBLE_VAULT;1.2;AES256;matrix
  36666361363761366636626266613931326432313530356361643535396534623435393432386135
  3366346639386430646334333361303565653436343335660a393766303963633761343738663836
  61636264656534653934663835373934613963326563376435656634326633373263393735613932
  3164633537313039380a396638626366333639393463376666353534653837313438613435396333
  66303235616232343966336639313034383964623334663961313234376332333338343961313562
  3366623965646237633733373165346366333436373139346435

matrix__synapse__signing_key: !vault |
  $ANSIBLE_VAULT;1.2;AES256;matrix
  63353038343038626239333939363961393638343834316163316330376237626339303634613162
  3934313537333630633931333930343264323639303537390a353532636532626433393132376138
  35376235366533353763656331343034333431366333643934623537316665663730646532623039
  3433336635643134300a373334623136396635363530646161323735336230363737333362383235
  37646636346139366566666339616338346134373766373664316632373061333035643039336665
  62373562326133653461373763383337623339303832626335396530373162303337313134346265
  356230363135373266663736326238663931

matrix__synapse__reg_secret: !vault |
  $ANSIBLE_VAULT;1.2;AES256;matrix
  66386664663864336530613438643534666361306331366639393261303933613430333934613833
  6532383963306639616263616162353339633333343865350a666634323966373066643639616332
  33346436323230386264343535376161376531376434626563373961636562343533303934363234
  3033633366663030370a633566336136626138343930386237643736353166626334653364373162
  63356337363962373331333865616663336634373133633165633833653166373939376231356439
  63303839386134653333663462613136623937393162373465613233623931643039613339336462
  346332383032363866643637376563376639

matrix__synapse__macaroon_secret: !vault |
  $ANSIBLE_VAULT;1.2;AES256;matrix
  62653661363330626261303164636665336164383662343462373061356561326338343830306534
  3339633839333036333561643438346562646636333539650a396565306430653965303765396537
  63333437633964333236643239633561373332373365663835613437386139383333323364386462
  6638346532306130620a626563326663333562313464346338626533666237616231666465653239
  66336332663130623862396636373435303438383066313932653532333337316263613964343165
  66656639666664323933316339396634613134356336383239353638643730636235633732333764
  396330653436636161313939646233653834

matrix__synapse__form_secret: !vault |
  $ANSIBLE_VAULT;1.2;AES256;matrix
  30386164303933346363353063653137366636636535393761383930336132396162623835656134
  6563663236623163613865633638343530336337353261310a636636636639326162633933306131
  66383137393839396164633638336564356562666462383935373961313964316165343232343839
  3637623531363435610a356134316431343639336462333838373438323664643235346337663834
  33366663666563613733386135316665323735626336333039383333313232313862623564643937
  35643863343836656163653764353035326433653239393034386433663165663066343764613834
  363666366630653364303235643064303031

matrix__synapse__recaptcha_public_key: '6LdohNoZAAAAAGUDt5UKdbqc4XIcFACLuWw1L8ae'

matrix__synapse__recaptcha_private_key: !vault |
  $ANSIBLE_VAULT;1.2;AES256;matrix
  33653664633738633066323939306137333131663538383164343334346539333739303434356662
  6532353732656335386561613434393839663235613863340a383236663931346132323334336632
  37363935666539383534393830363830333336626236333035346261636266656363356361393365
  3935363737343564330a623839333932303465616663623363353333373633353936383432646166
  64353465313836306238653531383662366637616538666661663063366462323962373337666165
  3231306636303736653330333037393530643931366136326634

matrix__media_repo__postgres: !vault |
  $ANSIBLE_VAULT;1.2;AES256;matrix
  62356433313435383239316430666234386234626335346239313264346532613232303064333731
  3833633035363237346537623633303135383162636465300a366637666535353463616665653237
  34346636333061303033633362356232643334393133363033646635313134366164306461663364
  3935396239343630340a396463623534613630323833333330633861393063323332613532373565
  32626463313965323635633034316237663835616464333261626331396136316335636132636265
  62343935316666656466336438633565316338363665366161643739616534353933373861343938
  38323533383362623835633230623363666662643264393534306362663535666531326534303636
  66303133626239633436663137633438326632366234613033396230393262326234356362396336
  64386664613064323034303039623038633339353362376238633065343364646266633862663232
  6637313330656465623437393764353466666230666633366238

matrix__media_repo__s3_endpoint: 's3.eu-central-1.amazonaws.com'
matrix__media_repo__s3_bucket: 'fedihub-matrix-media-repo'

matrix__media_repo__s3_access_key: !vault |
  $ANSIBLE_VAULT;1.2;AES256;matrix
  35326162306233313937646565623563636538376464643739313462323535393366363262323565
  3465623639303935623461336230646439663839343331320a663635343239366366623062346630
  37626332323965383738366532313665383564366132383530613762643836333831393735666438
  6132393437343464390a336339383439326338646137356634333534636236326438646433353965
  63376165363038326337346139303961373565346265393836396439656131633263

matrix__media_repo__s3_access_secret: !vault |
  $ANSIBLE_VAULT;1.2;AES256;matrix
  36316562306261323138663361353762393736343765346435633631353734663765343638383265
  3132383663393161306464386336396265363962313764320a653862343933666461666134383434
  38623661326462303962376535373862303235353131363361633736336231336536633338643233
  3539663031633038360a316433343432663865393738366633376235653839326232663134303931
  65363837313464616536333934353062353962363365353831623234363939636333616634323832
  3466656664353839333966643333336432303435663232646664

matrix__static__user_id: '@1:fedihub.com'

matrix__static__access_token: !vault |
  $ANSIBLE_VAULT;1.2;AES256;matrix
  66626138616337666537383562623139356364633837376133326235396662306330663666336333
  6538623736613538373235623866333066396539396138320a316363393664363332353138386261
  34313935326433623763656433326533323233623738313063623938336664663230623033373032
  3831393536313235300a313935313636353762346437633366336433343666383630373232616338
  35346636343137356530373538303437306461393663393862356666326430363339333739653434
  65343963653731626133343636633035393661373634373066633165356566623538663862376662
  36343865643637306432656563626566666362393737666461316435666664323735323439653839
  65353937393265356264316238356636376635356263623364363564616234616330646638323635
  30326436656366336562393332386565616338643565316637343336663133373532636634323932
  30333566363866313432366164613537353230356630383830653463623233316539326337316638
  39356663343938356266373162333166366437303033643366313137323332643938626266303165
  31636662663937613638366433316433393662386637623331383761393866336234633332306434
  65363063636562633762373232323639393435623765376265613638616265353363636439373537
  66633335303564656637653933363730366462363164306334386166663534333738356266626439
  63393336333666616335656566653835393163656430333631386364396364313666333833633932
  31663530646237376630366632336661316561336233636637333761363739343639363536626665
  39376636373630383034393966316335363138643334396432346638633865383435313139663937
  31336165666466613733326135656433633461653237396533643237353463363665646338663164
  63316430663163303434346233316464386634623836373664336366313961353963663632666362
  64626636376466333139

common__iptables__drop_by_default: true

common__iptables__v4_filter: |
  # Allow incoming HTTP, HTTPS, Matrix.
  -A INPUT  -p tcp -m multiport --dport 80,443,8448 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
  -A OUTPUT -p tcp -m multiport --sport 80,443,8448 -m conntrack --ctstate ESTABLISHED     -j ACCEPT

  # Deny other HTTP, HTTPS, Matrix.
  -A INPUT  -p tcp -m multiport --dport 80,443,8448 -j REJECT
  -A OUTPUT -p tcp -m multiport --sport 80,443,8448 -j REJECT

common__iptables__v6_filter: '{{ common__iptables__v4_filter }}'
