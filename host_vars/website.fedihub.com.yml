---
ansible_become_pass_for:
  kotovalexarian: !vault |
    $ANSIBLE_VAULT;1.2;AES256;kotovalexarian
    64613435623165663834336663346162346339636165366239393536306235396135396663633963
    3031366561316161613134366335383739663164323035320a383565366338336363323565343531
    62353134326535343538323433353635316331353330376230663334613634653834646631333430
    3462306234393838350a386538396532386433353839313063303061376236613931633032613538
    32643432323634646638343930333134353866393032623638383463363866346131306564346239
    3663656166323464386239656366356663646261363131343636

ansible_become_pass: "{{ ansible_become_pass_for[admin] }}"

common__certbot__cert_name: 'website.fedihub.com'
common__certbot__cert_domains:
  - 'website.fedihub.com'
  - 'fedihub.com'
  - 'www.fedihub.com'
common__certbot__post_hook: 'systemctl is-active nginx.service || systemctl start nginx.service'
common__certbot__pre_hook: 'systemctl is-active nginx.service && systemctl stop nginx.service || true'

common__nginx__state: install
common__nginx__remove_default: true

common__iptables__drop_by_default: true

common__iptables__v4_filter: |
  # Allow incoming HTTP, HTTPS.
  -A INPUT  -p tcp -m multiport --dport 80,443 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
  -A OUTPUT -p tcp -m multiport --sport 80,443 -m conntrack --ctstate ESTABLISHED     -j ACCEPT

  # Deny other HTTP, HTTPS.
  -A INPUT  -p tcp -m multiport --dport 80,443 -j REJECT
  -A OUTPUT -p tcp -m multiport --sport 80,443 -j REJECT

common__iptables__v6_filter: '{{ common__iptables__v4_filter }}'

fedihub__website__host: 'fedihub.com'
fedihub__website__port: 8000
fedihub__website__public_dir: '/opt/fedihub/website/public'
fedihub__website__nginx__ssl_cert: '/etc/letsencrypt/live/website.fedihub.com/fullchain.pem'
fedihub__website__nginx__ssl_key:  '/etc/letsencrypt/live/website.fedihub.com/privkey.pem'

fedihub__website__database_url: !vault |
  $ANSIBLE_VAULT;1.2;AES256;website
  34313536366233303638383531663233626435626633353336326363666235383361653062363138
  6231343665623163393632353963343965323239643163350a306334333565633336396438633362
  64633537666335353539303836323136636365333937643462636530376266333763376234323533
  3138386238346635310a386439616563663766326133373065366239623336663339336432636339
  63383734623634343661613466383030393336366563313663623630643064373566626532303638
  61343931323532363635373831646533353135323566623963396239623834653038306139323734
  31323465623038633233613733656530613231633266366130313532636535663764613664376635
  62623536653530333338363463363336306136376535323362383634663932323630353163373530
  65396363616564613365303864363532626638396563313835623739633733636265626332393330
  3137656231616432663134383766356231363537343632653566

fedihub__website__secret_key: !vault |
  $ANSIBLE_VAULT;1.2;AES256;website
  38663838386266363362653033666632626331646236363736343433373430353933383739386264
  6132633537653738666134356439663366626334333432350a653534303039646563363133646161
  61643237383966313432346564363063383035653566333337303534613734353032653939366462
  3264393031646462350a373833646364363837356233643137386466653830356631346130346363
  33333863613363646134363630613339343738613465313164333966383131383836323333653531
  3534613837643261613436653263393864643762656138363533
