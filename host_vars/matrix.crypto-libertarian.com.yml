---
ansible_become_pass_for:
  kotovalexarian: !vault |
    $ANSIBLE_VAULT;1.2;AES256;kotovalexarian
    61643339313266356538643266316138633738616632633531383730383433633030656633383431
    3335393862333133643030613131636232663434636164650a376464396333323662363037376164
    38356164613536633139643333383362363531343933363661356532663838656336363166616638
    3032303434366266330a376439396233363065323135613963633265373435636530646433343036
    65663336353266323636633339313236353565353431363965303762643766356562313566383031
    3536363333616139613738336566633937313539623536316666

ansible_become_pass: "{{ ansible_become_pass_for[admin] }}"

common__certbot__cert_name: 'matrix.crypto-libertarian.com'
common__certbot__cert_domains:
  - 'matrix.crypto-libertarian.com'
common__certbot__post_hook: null
common__certbot__pre_hook: null

common__nginx__state: null

matrix__site_host: 'crypto-libertarian.com'
matrix__base_host: 'matrix.crypto-libertarian.com'
matrix__site_url: 'https://crypto-libertarian.com'
matrix__base_url: 'https://matrix.crypto-libertarian.com'
matrix__admin_contact: 'mailto:kotovalexarian@gmail.com'

matrix__nginx__ssl_cert: '/etc/letsencrypt/live/matrix.crypto-libertarian.com/fullchain.pem'
matrix__nginx__ssl_key:  '/etc/letsencrypt/live/matrix.crypto-libertarian.com/privkey.pem'

matrix__synapse__pg_enable: true
matrix__synapse__pg_host: 'postgres.crypto-libertarian.com'
matrix__synapse__pg_username: 'matrix_synapse'
matrix__synapse__pg_database: 'matrix_synapse'

matrix__synapse__pg_password: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  35643162356165376337313538396466333534613666323865636363656264373539646135303136
  3263643435383866643161333931383430313133633331370a636639303366616132616164306537
  31333162356131633635303931353931633763386238636461343437363861343565616430666137
  3738616138303739350a646331323639306464656332383233333664653561313934666366623939
  65373839653630353830326336376534313136313735343532373232653536653363366132333363
  6639346134356664313434373664653734366361633935633230

matrix__synapse__signing_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  39396138396261633738353039613533343139373763383332373462303136643963646663383435
  3463393731666561323964323932616339393364653165610a303136653764356537393334643631
  61376132393335383238333234363039363537303233306264643764393635326334393038393636
  6262633430353037340a666535326332633038663234643434386530616431333062653838323163
  65336562656563386532303630653866663066363665393863306438643262323339336530646362
  39366233353337666231383864646161373364326561323839616238393866313834363633373763
  636435663437663036636531656166353066

matrix__synapse__reg_secret: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  35653732666236656463393031376563646462313839396666363039363536363166353561333233
  6533313066626233353234666563663730303162313239370a653262313762353133313362333736
  39643537653636613062316132623262323137393139306662333635393130643964616433663365
  6635303939316261310a663733343363613962323630313134323239646563613037316266666566
  32353630613535383365633436393166313932396230376331653738356632616339626662323333
  32613138623436323761363736306531613132333638313834653033333931316662653037663666
  633538663237646163303361303632393961

matrix__synapse__macaroon_secret: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  65313735626161306534653238626335633237336631303338396162323362623162326562636662
  6634326164643365626238393066346135623466393231380a643761386665396530336231346132
  63646231663164623462363931666230646532393233306333396634636166316465643737356532
  6634306435363636630a323033303635306535383032363837626339656666303639323166653464
  30386564643834613231343730643337623964383337333364393332643631323639383363333936
  39353830323131326330646263303138343235353534326462313361636631323938353534396332
  663333313135653038333931343830653262

matrix__synapse__form_secret: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  62343165646366333633313137373033653665373938616162323731616139336432343665366163
  6438663035303430346131383636306632303364306163340a666633643363656130316532666635
  66373262616666336237383834663963626366303965303035326631393064306263666165623437
  6335613636626337340a313731326135633635313366636130386335613030656131613638353534
  61333335343165383332363336633133343665353362623731353134346561613337643932313566
  32613930393162373434303765653662356234666262373533313333393165656632333339383037
  306461653937343264356662373534313965

matrix__synapse__recaptcha_public_key: '6LcJ26wZAAAAABVW68GFDaZn0RM1Ros6DUfkND_9'

matrix__synapse__recaptcha_private_key: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  39396237366238336563333432303037666232633063623538633438363933343563386133363330
  6230633362653432383936653064626337636435373939360a333437326431663034623233396437
  31396330663866306666336330643533323033626435373462626330306434373930393432336132
  3935666338366239300a353839623535643734633632366338653532386536636134336661633135
  64343236396564656136383438396265616531356563636431383539326361616531343939306236
  6636353137636136366633616466643434353836646563646231

matrix__static__user_id: '@1:crypto-libertarian.com'

matrix__static__access_token: !vault |
  $ANSIBLE_VAULT;1.1;AES256
  62313661366162333133653933653431633466643333616631393839373166366333316634363331
  3834353933336264356633323563313262343461303862640a366263383835333265346230383662
  62366130303835313236353231363230626534663563666163333666326463343863663635373435
  6136633032353330640a333935633235303930626435626237366437616164356338306537346438
  61323239393863353939313562623761633339336330336630323463353863383134353333343630
  65643133363231323764316132343739326134636138656237323337326539316561386531313931
  61363033326264376231386232343931353832353832646166656462303737613933666231623565
  38326230653931376263366563323833643966643161383336613338623232363439636331346532
  34333562653365323732663239326464323336336530353232376537323963643035636363323833
  36346431363161383464663238623862366130663837636637653031323230613164323131326239
  34333133663835633564386634373739313139373261313935393261316432373634666639613835
  32653035633433643132396536636163316139363333363437333363616661393130646137303163
  65326435643563613837646130646262376437636564323161303638613565346664623738343036
  66383662383234373833646136356465386363666539656266323133313134663264643534663261
  62316131633636646530393939373135613633303538346631353261346262643438366161306435
  39326538333135666533343261326361613632313164396431623734356431343932656432313238
  36346563616234373962373661316238316131626636316163323631303038636335643761636230
  63383835616238666165363435393938396431343264616465303161323763363832386432386330
  39653438646339666130633162636364343230656134366162393531393135653831303635316236
  65333231306535306239

common__iptables__drop_by_default: true

common__iptables__v4_filter: |
  # Allow incoming HTTP.
  -A INPUT  -p tcp --dport 80  -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
  -A OUTPUT -p tcp --sport 80  -m conntrack --ctstate ESTABLISHED     -j ACCEPT

  # Deny other HTTP.
  -A INPUT  -p tcp --dport 80 -j REJECT
  -A OUTPUT -p tcp --sport 80 -j REJECT

  # Allow incoming HTTPS.
  -A INPUT  -p tcp --dport 443 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
  -A OUTPUT -p tcp --sport 443 -m conntrack --ctstate ESTABLISHED     -j ACCEPT

  # Deny other HTTPS.
  -A INPUT  -p tcp --dport 443 -j REJECT
  -A OUTPUT -p tcp --sport 443 -j REJECT

  # Allow incoming Matrix (HTTPS).
  -A INPUT  -p tcp --dport 8008 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
  -A OUTPUT -p tcp --sport 8008 -m conntrack --ctstate ESTABLISHED     -j ACCEPT

  # Deny other Matrix (HTTPS).
  -A INPUT  -p tcp --dport 8008 -j REJECT
  -A OUTPUT -p tcp --sport 8008 -j REJECT

common__iptables__v6_filter: |
  # Allow incoming HTTP.
  -A INPUT  -p tcp --dport 80  -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
  -A OUTPUT -p tcp --sport 80  -m conntrack --ctstate ESTABLISHED     -j ACCEPT

  # Deny other HTTP.
  -A INPUT  -p tcp --dport 80 -j REJECT
  -A OUTPUT -p tcp --sport 80 -j REJECT

  # Allow incoming HTTPS.
  -A INPUT  -p tcp --dport 443 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
  -A OUTPUT -p tcp --sport 443 -m conntrack --ctstate ESTABLISHED     -j ACCEPT

  # Deny other HTTPS.
  -A INPUT  -p tcp --dport 443 -j REJECT
  -A OUTPUT -p tcp --sport 443 -j REJECT

  # Allow incoming Matrix (HTTPS).
  -A INPUT  -p tcp --dport 8008 -m conntrack --ctstate NEW,ESTABLISHED -j ACCEPT
  -A OUTPUT -p tcp --sport 8008 -m conntrack --ctstate ESTABLISHED     -j ACCEPT

  # Deny other Matrix (HTTPS).
  -A INPUT  -p tcp --dport 8008 -j REJECT
  -A OUTPUT -p tcp --sport 8008 -j REJECT
